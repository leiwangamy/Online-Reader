<!-- index.html -->
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡æœ¬è½¬è¯­éŸ³å·¥å…· | Text-to-Speech Generator</title>
    <style>
        body {
            font-family: "Segoe UI", sans-serif;
            background: #f0f4f8;
            padding: 2em;
            color: #333;
        }
        .container {
            background: #fff;
            padding: 2em;
            border-radius: 12px;
            max-width: 640px;
            margin: auto;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #1e88e5;
            font-size: 1.6em;
        }
        label {
            font-weight: bold;
        }
        input, select, textarea {
            margin-top: 4px;
            margin-bottom: 12px;
            width: 100%;
            padding: 0.6em;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-family: inherit;
        }
        textarea {
            resize: vertical;
        }
        input[type=checkbox] {
            width: 20px;
            height: 20px;
            transform: scale(1.5);
            cursor: pointer;
        }
        button {
            background-color: #1e88e5;
            color: white;
            border: none;
            padding: 0.8em 1.5em;
            font-size: 1em;
            border-radius: 6px;
            cursor: pointer;
        }
        button:hover {
            background-color: #1565c0;
        }
        audio {
            margin-top: 1em;
            width: 100%;
        }
        input[type=range] {
            appearance: none;
            width: 100%;
            height: 8px;
            background: linear-gradient(to right, #1565c0, #90caf9);
            border-radius: 5px;
            outline: none;
        }
        input[type=range]::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            background: #1e88e5;
            border-radius: 50%;
            cursor: pointer;
        }
        input[type=range]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            background: #1e88e5;
            border-radius: 50%;
            cursor: pointer;
        }
        .footer {
            text-align: center;
            margin-top: 3em;
            font-size: 0.9em;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤ æ–‡æœ¬è½¬è¯­éŸ³ç”Ÿæˆå™¨<br><span style="font-size: 0.6em; font-weight: normal;">Text-to-Speech Generator</span></h1>

        {% if error %}
        <p style="color: red; font-weight: bold;">âš ï¸ {{ error }}</p>
        {% endif %}

        <form method="POST" enctype="multipart/form-data">
            <label>ğŸ“ è¾“å…¥æ–‡æœ¬å†…å®¹:<br><span style="font-size: 0.9em; color: #666;">Type text directly</span></label>
            <textarea name="typed_text" rows="6" maxlength="10000" placeholder="è¾“å…¥æˆ–ç²˜è´´æ–‡æœ¬å†…å®¹..." oninput="updateCount(this.value.length)"></textarea>
            <div id="charCount" style="font-size: 0.85em; color: #666; margin-bottom: 1em;">0 / 10,000</div>

            <script>
            function updateCount(length) {
                document.getElementById('charCount').innerText = `${length} / 10,000`;
            }
            </script>

            <p style="color: #d32f2f; font-size: 0.9em; font-weight: bold;">
                âš ï¸ æ–‡æœ¬å»ºè®®ä¸è¶…è¿‡ <strong>10,000 å­—</strong>ï¼ˆçº¦ 5 åˆ†é’Ÿè¯­éŸ³ï¼‰<br>
                âš ï¸ Recommended limit: Under <strong>10,000 characters</strong> (~5 minutes)
            </p>

            <label>ğŸ“„ æˆ–ä¸Šä¼ æ–‡æœ¬æ–‡ä»¶ (.txt / .docx):<br><span style="font-size: 0.9em; color: #666;">Or upload a text file</span></label>
            <input type="file" name="textfile">

            <label>ğŸ™ï¸ è¯­éŸ³æ€§åˆ«:<br><span style="font-size: 0.9em; color: #666;">Voice Gender</span></label>
            <select name="voice_gender">
                <option value="female">å¥³å£° Female</option>
                <option value="male">ç”·å£° Male</option>
            </select>

            <label>ğŸµ å¯ç”¨èƒŒæ™¯éŸ³ä¹:<br><span style="font-size: 0.9em; color: #666;">Enable background music</span></label>
            <br><br>
            <input type="checkbox" name="music">

            <p style="margin: 1em 0; font-size: 0.9em; color: #666;">ğŸ‘‡ å¯é€‰ï¼šä¸Šä¼ è‡ªå®šä¹‰èƒŒæ™¯éŸ³ä¹</p>

            <label>ğŸ¼ ä¸Šä¼ èƒŒæ™¯éŸ³ä¹ï¼ˆå¯é€‰ï¼‰:<br><span style="font-size: 0.9em; color: #666;">Optional background music (.mp3)</span></label>
            <input type="file" name="bgmusicfile" accept=".mp3">

            <p style="color: #d32f2f; font-size: 0.9em; font-weight: bold; margin-top: -0.5em; margin-bottom: 1.5em;">
                âš ï¸ èƒŒæ™¯éŸ³ä¹å»ºè®®ï¼šæ—¶é•¿ä¸è¶…è¿‡ <strong>5 åˆ†é’Ÿ</strong>ï¼Œæ–‡ä»¶å¤§å°å°äº <strong>5MB</strong><br>
                âš ï¸ Music recommendation: under <strong>5 minutes</strong> and <strong>5MB</strong>
            </p>


            <label>ğŸ“¢ è¯­é€Ÿï¼ˆè¯­éŸ³ï¼‰:<br><span style="font-size: 0.9em; color: #666;">Voice speaking rate</span></label>
            <input type="number" name="voice_speed" step="0.1" value="1.0">

            <label>â© èƒŒæ™¯éŸ³ä¹æ’­æ”¾é€Ÿåº¦:<br><span style="font-size: 0.9em; color: #666;">Music playback speed</span></label>
            <input type="number" name="speed" step="0.1" value="1.0">

            <label>ğŸ”Š èƒŒæ™¯éŸ³ä¹éŸ³é‡ï¼ˆå·¦ï¼šæœ€å“ï¼Œå³ï¼šæœ€è½»ï¼‰:<br><span style="font-size: 0.9em; color: #666;">Music volume (left = louder, right = softer)</span></label>
            <input type="range" name="music_volume" min="0" max="40" value="15">

            <button type="submit">â–¶ï¸ ç”Ÿæˆè¯­éŸ³ Generate</button>
        </form>

        {% if download_link %}
        <h3>âœ… è¯­éŸ³ç”ŸæˆæˆåŠŸï¼<br><span style="font-size: 0.9em; color: #666;">Speech generated successfully</span></h3>
        <audio controls>
            <source src="{{ download_link }}" type="audio/mpeg">
            æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚Your browser does not support audio.
        </audio>
        <br><br>
        <a href="{{ download_link }}" download>ğŸ“¥ ç‚¹å‡»ä¸‹è½½è¯­éŸ³æ–‡ä»¶ | Download MP3</a>
        {% endif %}
    </div>

    <div class="footer">
        æœ¬é¡¹ç›®ç”±ç”¨æˆ·è®¾è®¡ï¼Œä½¿ç”¨ <strong>OpenAI ChatGPT</strong> è¾…åŠ©å¼€å‘ï¼Œè¯­éŸ³ç”ŸæˆåŸºäº Microsoft Edge-TTSã€‚<br>
        Created by the user with assistance from <strong>OpenAI ChatGPT</strong>. Powered by Microsoft Edge-TTS.
    </div>
</body>
</html>
